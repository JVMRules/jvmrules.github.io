<!DOCTYPE html>
<html>
<head>
    <title>DVARE</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="css/style.css" rel="stylesheet" media="screen, print">
    <link href="css/bootstrap-toc.css" rel="stylesheet"/>
    <link href="img/favicon.ico" rel="icon" type="image/x-icon">
</head>
<body data-offset="100" data-spy="scroll" data-target="#toc">

<div class="container-fluid">
    <div class="row-fluid">

        <a href="https://github.com/dvare/rules#fork-destination-box">
            <img class="forkme" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"
                 alt="Fork me on GitHub">
        </a>

        <div id="sidenav" class="span2">


            <nav id="toc" data-spy="affix" data-toggle="toc"></nav>

        </div>
        <div id="content">
            <div id="row">
                <div class="col-lg-12" style="margin-bottom: 10px;background-color: #0088cc;">
                    <img src="img/logo.png" alt="DVARE"/>
                </div>
            </div>


            <div id="sections">

                <div>
                    <h2 id="whatisrules">What is DVARE Framework</h2>
                    <p><span class="highlight">DVARE</span> is lightweight expression evaluator for Java, that allows
                        evaluating
                        Arithmetic and boolean Comparison expression and <span class="highlight">DVARE RULES</span> is
                        business rule
                        engine built DVARE Framework on which provides an
                        interface for embedding POJO rules in your application. You can turn your POJOs into business
                        rules with a couple of intuitive annotations and you can evaluate both text and java based
                        rules.</p>

                </div>


                <section>
                    <h2 id="usage">Usage</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Use with maven</div>
                        <div class="panel-body">
                            <div>
                                <h4>Repository</h4>
                                <pre><code class="language-xml" data-lang="xml"><span
                                        class="repo">&lt;repository&gt;</span>
    <span class="repo">&lt;id&gt;</span>davre<span class="repo">&lt;/id&gt;</span>
    <span class="repo">&lt;url&gt;</span>https://raw.githubusercontent.com/dvare/release/rules/<span class="repo">&lt;/url&gt;</span>
<span class="repo">&lt;/repository&gt;</span> </code></pre>
                            </div>
                            <div>
                                <h4>Dependencies</h4>
                                <pre><code class="language-xml" data-lang="xml"><span
                                        class="repo">&lt;dependency&gt;</span>
    <span class="repo">&lt;groupId&gt;</span>com.dvare<span class="repo">&lt;/groupId&gt;</span>
    <span class="repo">&lt;artifactId&gt;</span>rules<span class="repo">&lt;/artifactId&gt;</span>
    <span class="repo">&lt;version&gt;</span>1.0<span class="repo">&lt;/version&gt;</span>
<span class="repo">&lt;/dependency&gt;</span></code></pre>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Configuration -->


                <section>
                    <h2 id="configuration">Configuration</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Rule Engine Configuration</div>
                        <div class="panel-body">
<pre class="prettyprint"><code class="language-java">RuleConfiguration configuration = new RuleConfiguration();
TextualRuleEngine textualRuleEngine = new TextualRuleEngine(configuration);
RuleEngine ruleEngine = new RuleEngine(textualRuleEngine);</code></pre>
                        </div>
                    </div>
                </section>


                <!-- Rule Definition -->


                <section>
                    <h2 id="ruledefinition">Rule Definition</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Rule Definition</div>
                        <div class="panel-body">
                            <p><span class="highlight">DVARE RULES</span> provide a couple of annotations for rule
                                definition. A <span class="highlight">@Rule</span>
                                annotation turns simple POJO class into the rule and
                                <span class="highlight">@Condition</span> use to
                                specify business Logic.
                                <span class="highlight">@Condition(type = ConditionType.CODE)</span> also annotation
                                have attribute name type which help the Rule Engine to differentiate between
                                <span class="highlight">CODE</span> and <span class="highlight">TEXT</span> rules.

                            <pre class="prettyprint"><code class="language-java">Rule(name = "ruleDefinition", description="Rule for documentation")
public class RuleDefinition {
    @Condition(type = ConditionType.CODE)
    public Boolean condition() {
        return true;
    }
}</code></pre>
                            <p>To Scheduling the <span class="highlight">Rule</span> in <span class="highlight">Rule Engine</span>
                                set the priority of Rule by adding the priority
                                attribute in <span class="highlight">@Rule(priority = 1)</span> and ordered condition in
                                rule by adding order attribute
                                in <span class="highlight">@Condition(order = 1)</span> by default rule engine served in
                                <span class="highlight">FCFS</span>.</p>

                            The method with <span class="highlight">@Success</span> and <span
                                class="highlight">@Fail</span> annotation run according to the condition
                            results.
                            Annotation <span class="highlight">@Before</span> and <span
                                class="highlight">@After</span>
                            used to associate and disassociate resources when you have
                            multiple conditions in a rule.</p>

                        </div>
                    </div>
                </section>


                <!-- Basic Rule Example -->

                <section>
                    <h2 id="basicRuleExample">Basic Rule Example</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Basic Rule</div>
                        <div class="panel-body">
                            Rule
                            <pre class="prettyprint"><code class="language-java">@Rule(name = "basicRule", priority = 0)
public class BasicRule {
    Logger logger = Logger.getLogger(BasicRule.class);
    private Integer age;
    @Condition(type = ConditionType.CODE)
    public boolean condition() {

        return age > 20 && age < 30;
    }

    @Success
    public void success() {
        logger.info("Rule Successfully Run");
    }

    @Fail
    public void fail() {
        logger.error("Rule Failed");
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }
}</code></pre>
                            Test
                            <pre class="prettyprint"><code class="language-java">public class BasicRuleTest extends TestCase {
    @Test
    public void testApp() throws IllegalRuleException {

        RuleConfiguration configuration = new RuleConfiguration();
        DVAREEngine dvareEngine = new DVAREEngine(configuration);
        RuleEngine ruleEngine = new RuleEngine(dvareEngine);

        BasicRule basicRule = new BasicRule();
        basicRule.setAge(25);
        ruleEngine.registerRule(basicRule);
        ruleEngine.fireRules();

    }
</code></pre>
                        </div>
                    </div>

                </section>


                <!-- Rule Definition -->


                <section>
                    <h2 id="dvareRuleRefinition">Textual Rule Definition</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Textual Rule Definition</div>
                        <div class="panel-body">
                            <p>Business Rules is company policies which change with time and If these rules and embedded
                                is an application change need a new release . To Overcome this problem DARE provides
                                Textual Expression Evaluator which is Embedded in Rule Engine. These rules are a String
                                which can be loaded from a file or in the database so that can be easily
                                changeable. </p>
                            <p>To add textual expression solver in a rule pass <span
                                    class="highlight">TextualRuleEngine</span> parameter in condition
                                method and change Condition type to TEXT <span class="highlight">@Condition(type = ConditionType.DVARE)</span>
                                annotation.</p>
                            <pre class="prettyprint"><code class="language-java">@Condition(type = ConditionType.TEXT)
public boolean condition(TextualRuleEngine textualRuleEngine) {
}</code></pre>
                        </div>
                    </div>
                </section>


                <!-- DVARE  Rule Example -->

                <section id="dvareRule">
                    <h2>Textual Rule Example</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Textual Rule Example</div>
                        <div class="panel-body">
                            Rule
                            <pre class="prettyprint"><code class="language-java">@Rule(name = "dvareRule", priority = 0)
public class DvareBasedRule {
    Logger logger = Logger.getLogger(DvareBasedRule.class);
    private String rule;
    private File fileRule;
    private Person person;

    @Condition(type = ConditionType.CODE)
    public boolean condition(DVAREEngine dvareEngine) {
        try {
            return dvareEngine.evaluate(rule, Person.class, person);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }

    @Condition(type = ConditionType.CODE)
    public boolean condition2(DVAREEngine dvareEngine) {
        try {
            return dvareEngine.evaluate(fileRule, Person.class, person);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return false;
    }

    @Before
    public void beforeAction() {
        logger.info("Before Rule Running");
    }
    @Success
    public void success() {
        logger.info("Rule Successfully Run");
    }
    @Fail
    public void fail() {
        logger.error("Rule Failed");
    }
    @After
    public void afterAction() {
        logger.info("After Rule Running");
    }

    public void setRule(String rule) {
        this.rule = rule;
    }

    public void setFileRule(File fileRule) {
        this.fileRule = fileRule;
    }

    public void setPerson(Person person) {
        this.person = person;
    }
}</code></pre>
                            Test
                            <pre class="prettyprint"><code class="language-java">public class DvareBasedRuleTest extends TestCase {
    @Test
    public void testApp() throws IllegalRuleException {

        RuleConfiguration configuration = new RuleConfiguration();
        DVAREEngine dvareEngine = new DVAREEngine(configuration);
        RuleEngine ruleEngine = new RuleEngine(dvareEngine);

        Person male = new Person();
        male.setAge(25);
        male.setGender("Male");
        male.setTitle("Mr");

        DvareBasedRule dvareRule = new DvareBasedRule();
        dvareRule.setPerson(male);
        dvareRule.setRule("age between [ 20 , 30 ] And title = 'Mr' And gender = 'Male'");
        URL url = this.getClass().getClassLoader().getResource("rules/age_rule.dvr");
        dvareRule.setFileRule(new File(url.getFile()));
        ruleEngine.registerRule(dvareRule);

        Person female = new Person();
        female.setAge(25);
        female.setGender("Female");
        female.setTitle("Ms");

        DvareBasedRule dvareRule2 = new DvareBasedRule();
        dvareRule2.setPerson(female);
        dvareRule2.setRule("age between [ 20 , 30 ] And title = 'Ms' And gender = 'Female'");
        URL url2 = this.getClass().getClassLoader().getResource("rules/age_rule2.dvr");
        dvareRule2.setFileRule(new File(url2.getFile()));
        ruleEngine.registerRule(dvareRule2);
        ruleEngine.fireRules();

    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <section id="dataTypes">
                    <h2>Data Types</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Data Types</div>
                        <div class="panel-body">
                            <table>
                                <thead>
                                <tr>
                                    <th>Data Type</th>
                                    <th>Type</th>
                                    <th>List Type</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>String</td>
                                    <td>'A'</td>
                                    <td>{'A','B'}</td>
                                </tr>
                                <tr>
                                    <td>Integer</td>
                                    <td>4</td>
                                    <td>{2,5}</td>
                                </tr>
                                <tr>
                                    <td>Float</td>
                                    <td>4.2</td>
                                    <td>{3.1,5.5}</td>
                                </tr>
                                <tr>
                                    <td>Boolean</td>
                                    <td>true,false</td>
                                    <td>{true,false}</td>
                                </tr>
                                <tr>
                                    <td>Regex</td>
                                    <td>R'*'</td>
                                    <td>[R'*',R'*']</td>
                                </tr>
                                <tr>
                                    <td>Date</td>
                                    <td>[15-01-12016]</td>
                                    <td>{[15-01-2016],[20-02-2016]}</td>
                                </tr>
                                <tr>
                                    <td>DateTime</td>
                                    <td>[15-01-12016-10:20:56]</td>
                                    <td>{[15-01-12016-15:20:56],[20-02-12016-23:20:56]}</td>
                                </tr>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <section id="validation-operations">
                    <h2>Validation Operations</h2>
                    <p></p>
                    <div id="equalityOperations">
                        <div class="panel panel-default">
                            <div class="panel-heading">Comparison Operations</div>
                            <div class="panel-body">
                                <table>
                                    <thead>
                                    <tr>
                                        <th> Operation Name</th>
                                        <th> Syntax</th>
                                        <th> DataTypes</th>
                                        <th> Operand</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td> EQUAL</td>
                                        <td> eq, =</td>
                                        <td> Integer, Float, String, Boolean, Regex, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> NOT EQUAL</td>
                                        <td> ne, !=, <></td>
                                        <td> Integer, Float, String, Boolean, Regex, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> LESS</td>
                                        <td> lt, <</td>
                                        <td> Integer, Float, String, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> LESS EQUAL</td>
                                        <td> le, <=</td>
                                        <td> Integer, Float, String, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> GERATER</td>
                                        <td> gt, ></td>
                                        <td> Integer, Float, String, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> GERATER EQUAL</td>
                                        <td> ge, >=</td>
                                        <td> Integer, Float, String, Date, DateTime</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> INL</td>
                                        <td> IN,In ,in</td>
                                        <td> Integer, Float, String, Boolean,Regex, Date, DateTime</td>
                                        <td> List Type</td>
                                    </tr>
                                    <tr>
                                        <td> BETWEENL</td>
                                        <td> Between, between</td>
                                        <td> Integer, Float, Date, DateTime</td>
                                        <td> List [size=2]</td>
                                    </tr>
                                    <tr>
                                        <td> AND</td>
                                        <td> AND, And, and</td>
                                        <td> Boolean</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> OR</td>
                                        <td> OR, Or, or</td>
                                        <td> Boolean</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> IMPLIES</td>
                                        <td> Implies, implies, =></td>
                                        <td> Boolean</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> NOT</td>
                                        <td> NOT, Not, not</td>
                                        <td> Boolean</td>
                                        <td> Single Type</td>
                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <br/>
                    <div id="arithmeticOperations">
                        <div class="panel panel-default">
                            <div class="panel-heading">Arithmetic Operations</div>
                            <div class="panel-body">
                                <table>
                                    <thead>
                                    <tr>
                                        <th> Operation Name</th>
                                        <th> Syntax</th>
                                        <th> DataTypes</th>
                                        <th> Operand</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td> Sum</td>
                                        <td> sum, +</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Subtract</td>
                                        <td> sub, -<></td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Multiple</td>
                                        <td> mul, *</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Divide</td>
                                        <td> div, /</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Pow</td>
                                        <td> pow, ^</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Minimum</td>
                                        <td> min</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>
                                    <tr>
                                        <td> Maximum</td>
                                        <td> max</td>
                                        <td> Integer, Float</td>
                                        <td> Single Type</td>
                                    </tr>

                                    </tbody>
                                </table>


                            </div>
                        </div>
                    </div>

                </section>

                <section id="datacall-operations">
                    <h2>Data Operations</h2>
                    <div id="functioncall">

                        <div class="panel panel-default">
                            <div class="panel-heading">Function Call</div>
                            <div class="panel-body">
                                <table>
                                    <thead>
                                    <tr>
                                        <th> Operation Name</th>
                                        <th> Syntax</th>
                                        <th> DataTypes</th>
                                        <th> Operand</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td> Function Call</td>
                                        <td> fun ( name , argements)</td>
                                        <td> Literal, Integer, Float, String, Boolean, Regex, Date, DateTime</td>
                                        <td> Single or List</td>
                                    </tr>
                                    <tr>

                                    </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
                <section id="examples">
                    <h2>Dvare Example</h2>

                    <div class="panel panel-default">
                        <div class="panel-heading">Dvare Example</div>
                        <div class="panel-body">
<pre class="prettyprint"><code class="language-java">public class DvareRuleTest extends TestCase {
public class DvareRuleTest extends TestCase {
    SimpleDateFormat dateTimeFormat = new SimpleDateFormat("dd-MM-yyyy-HH:mm:ss");
    SimpleDateFormat dateFormat = new SimpleDateFormat("dd-MM-yyyy");

    @Test
    public void testApp() throws ExpressionParseException, InterpretException, ParseException {
        RuleConfiguration factory = new RuleConfiguration(new String[]{"com.dvare.function"});

        String exp = "Variable2 = (1 + 2) " +
                " And Variable0 <= fun( testFunction , 10 ) " +
                " And Variable1 in ['A','B'] " +
                " And Variable2 between [2,4]" +
                " And Variable3 > 3.0 " +
                " And Variable4 = false " +
                " And Variable5 in [12-05-2016,13-05-2016] " +
                " And Variable6 in [12-05-2016-15:30:00,13-05-2016-15:30:00] " +
                " And Variable7 in [R'B1.*',R'A1.*'] ";

        Expression expression = factory.getParser().fromString(exp, EqualOperation.class);
        Rule rule = new com.dvare.binding.rule.Rule(expression);

        EqualOperation equalOperation = new EqualOperation();
        equalOperation.setVariable0(10);
        equalOperation.setVariable1("A");
        equalOperation.setVariable2(3);
        equalOperation.setVariable3(3.2f);
        equalOperation.setVariable4(false);
        equalOperation.setVariable5(dateFormat.parse("12-05-2016"));
        equalOperation.setVariable6(dateTimeFormat.parse("12-05-2016-15:30:00"));
        equalOperation.setVariable7("A1B2");

        RuleEvaluator evaluator = factory.getEvaluator();
        boolean result = evaluator.evaluate(rule, equalOperation);
        assertTrue(result);
    }
}</code></pre>
                            <pre class="prettyprint"><code class="language-java">package com.dvare.function;
@FunctionService
public class TestFunction {
    @FunctionMethod(returnType = DataType.IntegerType, list = false, parameters = {DataType.IntegerType})
    public Integer testFunction(Integer veriable) {
        System.out.println("inside testFunction with argument value: " + veriable);
        return veriable;
    }
}
</code></pre>

                        </div>
                    </div>

                </section>
                <div id="footer">
                    <div id="api-_footer">
                        <p>Suggestions, contact, support and error reporting on <a
                                href="https://github.com/dvare/rules/issues">GitHub</a></p>
                    </div>
                </div>
                <div id="generator">
                    <div class="content">
                        DVARE 2016
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/bootstrap-toc.js"></script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css"
        defer="defer"></script>


</body>
</html>
